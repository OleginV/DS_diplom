*** ПАСПОРТ ПРОЕКТА ***

*** Данные проекта ***
Название проекта: "Прогнозирование урожайности сельскохозяйственных культур (подсолнечника) по данным гидрометеорологической информации"
Автор: Олег Воропаев
Профессия: Data scientist
Группа: DS-39


*** Цели и задачи проекта ***
Построить предиктивную модель для прогнозирования урожайности подсолнечника на основании данных гидрометеорологической информации (даных о погоде). 
Переменными для обучения модели являются данных о погоде с наземных метеостанций, целевой переменной служит средняя урожайность подсолнечника в муниципальных районах регионов РФ.


*** Источники входной информации ***
1.	Статистика по урожайности сельскохозяйственных культур по муниципальным районам субъектов РФ (источник: Росстат, https://rosstat.gov.ru/);
2.	Данные по населенным пунктам РФ с координатами геолокации (источник: ИНИД – Инфраструктура научно-исследовательских данных, https://www.data-in.ru/);
3.	Архив данных гидрометеорологических параметров с наземных метеостанций РФ (источник: https://rp5.ru/).
(описание структуры и содержимого данных входной информации см. в разделе "Содержимое входной информации")


*** Основная гипотеза для построения модели ***
- ПОГОДА ОПРЕДЕЛЯЕТ УРОЖАЙНОСТЬ. Главенствующим фактором для эффективного выращивания сельскохозяйственных культур являются оптимальные природно-климатические условия. 
Погодные факторы оказывают огромное влияние на урожайность культур. Так, благоприятные погодно-климатические условия способствуют росту урожайности, а неблагоприятные
или опасные природные явления, наоброт снижают урожайность, или даже могут привести к гибели растений. 
- ФАЗЫ РАЗВИТИЯ РАСТЕНИЙ. Различные погодные факторы могут оказывать различное влияние на растения в разные фазы их вегетации. Например, наболее высокая потребность во влаге 
у большинства растений возникает в начальный период вегетации (сразу после посева, первые всходы), а в завершающий период вегетации (хозяйственная зрелость) излишнее увлажнение 
может привести потерям урожая и вызвать загнивание растений.
- ТИП ПОЧВЫ. Еще одним важным фактором, определяющим уровень урожайности, является тип почвы, который определяет уровень плодородия земель. Чем выше плодородие земель, тем выше урожайность 
(самый плодородный тип почвы - это чернозёмные почвы).
Разработанная предиктивная модель базируется на основе оценки влияния погодных факторов в течении всего процесса вегетации сельскохозяйственной культуры (подсолнечника). 
За основу берутся агрегированные переменные с гидрометеорологической информацией (за весь срок вегетации растений, с учетом оптимальных сроков посева культур в разных регионах). 
Указанные переменные агрегируются для каждой фазы вегетации отдельно, таким образом модель имеет одинаковый набор агрегированных переменных для каждой фазы. 
Далее на основании статистически значимых различий переменных модель прогнозирует урожайность сельскохозяйственной культуры по регионам.


*** Описание содержимого репозитория github (https://github.com/OleginV/DS_diplom) ***
1. "LSTM_learning_total.ipynb" - notebook с кодом обучения и тестирования рекурентной и полносвязной сети.
	Обучение проводилось на датасете с сокращенным количеством переменных ("total").
2. "distance_id_meteo.ipynb" - notebook с кодом добавления ID ближайшей к населенному пункту метеостнации.
3. "model_training_phase.ipynb" - notebook с кодом обучения и тестирования бустинговых регрессионных моделей (XGBosst и CatBoost).
	Обучение проводилось на датасете с расширеным количеством переменных ("phase").
4. "model_training_total.ipynb" - notebook с кодом обучения и тестирования бустинговых регрессионных моделей (XGBosst и CatBoost).
	Обучение проводилось на датасете с сокращенным количеством переменных ("total").
5. "parser_rosstat.ipynb" - web-скрапер, notebook с кодом для автоматического скачивания данных по урожайности с/х культур по муниципальным районам с сайта Росстат.
6. "parser_rp5.ipynb" - web-скрапер, notebook с кодом для автоматического скачивания данных погоде с сайта https://rp5.ru.
7. "preparation_mldata_4phase.ipynb" - notebook с кодом обработки исходных данных.
	Были созданы датасеты для обучения предиктивных моделей ("total", "phase").
8. "sample_for_ml_model.sql" - SQL скрипт для выгрузки данных из базы данных "weather" (база в Postgresql)
9. "ssa_sunflower_yield.ipynb" - notebook с кодом анализа временного ряда урожайности подсолнечника в РФ.
	Был проведен сингулярный спектральный анализ для выявления трендовой компоненты.
10. "weather_DB.sql" - SQL скрипт для создания таблиц в базе данных "weather" (база в Postgresql)
11. INPUT - папка содержит файлы с входной информацией:
	- файлы "dataset...csv.zip" выгрузка информации о погоде из базы данных "weather";
	- "Meteo_link_full.zip" - файл с информацией о метеостанции (геокоординаты, id);
	- "historical_yields.csv.zip" - файл с исторической динамикой урожайности подсолнечника по регионам РФ;
	- "id_муниципалитета.csv.zip" - файл с уникальным ID муниципального района;
	- "settl_converter.zip" - файл для создания digit_id муниципального района;
	- "settle_ID.csv.gz" - файл со списком насселенных пунктов (с геокоординатами);
	- "target.csv.zip" - файл с целевой переменной (урожайность подсолнечника по муниципалитетам).
12. DATA - папка содержит датасеты для обучения моделей машинного обучения (созданные на основе обработки файлов из папки INPUT):
	- "Settlement_Id.csv.gz" - файл со списком насселенных пунктов (с геокоординатами) и ближайшей метеостанцией;
	- "data_ssa.csv.gz" - файл с результатами SSA нализа урожайности подсолнечника;
	- "weathe_data_phase.csv.gz" - датасет для обучения модели по фазам вегетации, содержащий переменные по фазам вегетации растений (4 фазы) в течении сезона;
	- "weathe_data_total.csv.gz" - датасет для обучения модели по всему сезону, содержащий итоговые (агрегированные) переменные для всего сезона (с сокращенным количеством переменных).
13. RESULTS - папка содержит итоговые файлы, полученые по итогам обучения моделей машинного обучения:
	- файлы с результатами rmse обоих моделей на обоих датасетах;
	- файлы со списком важных фичей;
	- MODELS - папка с сохраненными обученными моделями;
	- callbacks - сохраненные результаты обучения нейросетей.


*** Содержимое входной информации ***
1. Статистика по урожайности с/х культур по муниципальным районам субъектов РФ:
"agriculture" - Наименование сельскохозяйственной культуры, string
"federal_distr" - Наименование федерального округа, string
"region" - Наименование региона (субъекта РФ), string
"municipal" - Наименование муниципального района, string
"name_municip" - Наименование муниципального района (унифицированный), string
"category" - Категория сельхозтоваропроизводителя, string
"year" - Год, numeric
"yield" - Урожайность, ц/га, numeric

2. Данные по населенным пунктам:
"id" - id наблюдения в рамках набора данных, numeric
"region" - Наименование субъекта Российской Федерации, string
"municipality" - Наименование муниципального образования, string
"settlement" - Наименование населенного пункта, string
"type" - "Тип населенного пункта", string (город, село, деревня, кожуун, станица и др.)
"population" - "Население населенного пунктах, всего", numeric (человек)
"children" - Количество детей в возрасте до 18 лет в населенном пункте, numeric (человек)
"latitude_dms" - Широта населенного пункта в формате DMS, string
"longitude_dms" - Долгота населенного пункта в формате DMS, string
"latitude_dd" - Широта населенного пункта в формате DD, numeric
"longitude_dd" - Долгота населенного пункта в формате DD, numeric
"oktmo", - Значение кода ОКТМО для населенного пункта, string
"dadata" - "Отметка о том, что код ОКТМО был получен с помощью сервиса стандартизации адресов dadata.ru", boolean
"rosstat" - "Отметка о том, что код ОКТМО был получен на основе классификатора ОКТМО, размещенного на официальном сайте Росстата", boolean

3. Архив данных с гидрометеорологической информацией:
"Date" - Дата и время в данном населенном пункте. Учитывается летнее-змнее время.
"t_temperature" - Температура воздуха (градусы Цельсия) на высоте 2 метра над поверхностью земли
"po_pressure" - Атмосферное давление на уровне станции (миллиметры ртутного столба)
"p_pressure" - Атмосферное давление, приведенное к среднему уровню моря (миллиметры ртутного столба)
"pa_baric_tendency" - Барическая тенденция: изменение атмосферного давления за последние три часа (миллиметры ртутного столба)
"u_humidity" - Относительная влажность (%) на высоте 2 метра над поверхностью земли
"dd_wind_rhumb" - Направление ветра (румбы) на высоте 10-12 метров над земной поверхностью, осредненное за 10-минутный период, непосредственно предшествовавший сроку наблюдения
"ff_wind_speed" - Cкорость ветра на высоте 10-12 метров над земной поверхностью, осредненная за 10-минутный период, непосредственно предшествовавший сроку наблюдения (метры в секунду)
"ff10_wind_gust" - Максимальное значение порыва ветра на высоте 10-12 метров над земной поверхностью за 10-минутный период, непосредственно предшествующий сроку наблюдения (метры в секунду)
"ff3_wind_gust" - Максимальное значение порыва ветра на высоте 10-12 метров над земной поверхностью за период между сроками (метры в секунду)
"n_cloudiness" - Общая облачность (проценты)
"ww_actual_weather" - Текущая погода, сообщаемая с метеорологической станции
"w1_actual_weather" - Прошедшая погода между сроками наблюдения 1
"w2_actual_weather" - Прошедшая погода между сроками наблюдения 2
"tn_min_temperature" - Минимальная температура воздуха (градусы Цельсия) за прошедший период (не более 12 часов)
"tx_max_temperature" - Максимальная температура воздуха (градусы Цельсия) за прошедший период (не более 12 часов)
"cl_strato_clouds" - Слоисто-кучевые, слоистые, кучевые и кучево-дождевые облака
"nh_number_clouds" - Количество всех наблюдающихся облаков Cl или, при отсутствии облаков Cl, количество всех наблюдающихся облаков Cm (проценты)
"h_height_clouds" - Высота основания самых низких облаков (м)
"cm_alto_clouds" - Высококучевые, высокослоистые и слоисто-дождевые облака
"ch_cirrus_clouds" - Перистые, перисто-кучевые и перисто-слоистые облака
"vv_visibility_range" - Горизонтальная дальность видимости (км)
"td_dew_point_temp" - Температура точки росы на высоте 2 метра над поверхностью земли (градусы Цельсия)
"rrr_precipitation" - Количество выпавших осадков (миллиметры)
"tr_precipitation_time" - Период времени, за который накоплено указанное количество осадков (часы)
"e_soil_surface_nosnow" - Состояние поверхности почвы без снега или измеримого ледяного покрова
"tg_min_ground_temp" - Минимальная температура поверхности почвы за ночь. (градусы Цельсия)
"e1_soil_surface_withsnow" - Состояние поверхности почвы со снегом или измеримым ледяным покровом
"sss_snow_depth" - Высота снежного покрова (см)
"meteoid" - ID метеостанции
